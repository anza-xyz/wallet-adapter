"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[731,886],{73886:function(n,e,t){t.r(e),t.d(e,{default:function(){return u}});var i=t(4399),r=t.n(i),o=t(58725),s=t(36301),c=t.n(s),a=function(n,e,t,i){return new(t||(t=Promise))((function(r,o){function s(n){try{a(i.next(n))}catch(e){o(e)}}function c(n){try{a(i.throw(n))}catch(e){o(e)}}function a(n){var e;n.done?r(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(s,c)}a((i=i.apply(n,e||[])).next())}))};class u extends(r()){constructor(n,e){if(super(),this._network=e,this._publicKey=null,this._popup=null,this._handlerAdded=!1,this._nextRequestId=1,this._autoApprove=!1,this._responsePromises=new Map,this.handleMessage=n=>{var e;if(this._injectedProvider&&n.source===window||n.origin===(null===(e=this._providerUrl)||void 0===e?void 0:e.origin)&&n.source===this._popup)if("connected"===n.data.method){const e=new o.PublicKey(n.data.params.publicKey);this._publicKey&&this._publicKey.equals(e)||(this._publicKey&&!this._publicKey.equals(e)&&this.handleDisconnect(),this._publicKey=e,this._autoApprove=!!n.data.params.autoApprove,this.emit("connect",this._publicKey))}else if("disconnected"===n.data.method)this.handleDisconnect();else if(n.data.result||n.data.error){const e=this._responsePromises.get(n.data.id);if(e){const[t,i]=e;n.data.result?t(n.data.result):i(new Error(n.data.error))}}},this._beforeUnload=()=>{this.disconnect()},function(n){return"object"===typeof n&&null!==n}(t=n)&&"postMessage"in t&&"function"===typeof t.postMessage)this._injectedProvider=n;else{if(!function(n){return"string"===typeof n}(n))throw new Error("provider parameter must be an injected provider or a URL string.");this._providerUrl=new URL(n),this._providerUrl.hash=new URLSearchParams({origin:window.location.origin,network:this._network}).toString()}var t}handleConnect(){var n;return this._handlerAdded||(this._handlerAdded=!0,window.addEventListener("message",this.handleMessage),window.addEventListener("beforeunload",this._beforeUnload)),this._injectedProvider?new Promise((n=>{this.sendRequest("connect",{}),n()})):(window.name="parent",this._popup=window.open(null===(n=this._providerUrl)||void 0===n?void 0:n.toString(),"_blank","location,resizable,width=460,height=675"),new Promise((n=>{this.once("connect",n)})))}handleDisconnect(){this._handlerAdded&&(this._handlerAdded=!1,window.removeEventListener("message",this.handleMessage),window.removeEventListener("beforeunload",this._beforeUnload)),this._publicKey&&(this._publicKey=null,this.emit("disconnect")),this._responsePromises.forEach((([,n],e)=>{this._responsePromises.delete(e),n(new Error("Wallet disconnected"))}))}sendRequest(n,e){return a(this,void 0,void 0,(function*(){if("connect"!==n&&!this.connected)throw new Error("Wallet not connected");const t=this._nextRequestId;return++this._nextRequestId,new Promise(((i,r)=>{var o,s,c,a;this._responsePromises.set(t,[i,r]),this._injectedProvider?this._injectedProvider.postMessage({jsonrpc:"2.0",id:t,method:n,params:Object.assign({network:this._network},e)}):(null===(o=this._popup)||void 0===o||o.postMessage({jsonrpc:"2.0",id:t,method:n,params:e},null!==(c=null===(s=this._providerUrl)||void 0===s?void 0:s.origin)&&void 0!==c?c:""),this.autoApprove||null===(a=this._popup)||void 0===a||a.focus())}))}))}get publicKey(){return this._publicKey}get connected(){return null!==this._publicKey}get autoApprove(){return this._autoApprove}connect(){return a(this,void 0,void 0,(function*(){this._popup&&this._popup.close(),yield this.handleConnect()}))}disconnect(){return a(this,void 0,void 0,(function*(){this._injectedProvider&&(yield this.sendRequest("disconnect",{})),this._popup&&this._popup.close(),this.handleDisconnect()}))}sign(n,e){return a(this,void 0,void 0,(function*(){if(!(n instanceof Uint8Array))throw new Error("Data must be an instance of Uint8Array");const t=yield this.sendRequest("sign",{data:n,display:e});return{signature:c().decode(t.signature),publicKey:new o.PublicKey(t.publicKey)}}))}signTransaction(n){return a(this,void 0,void 0,(function*(){const e=yield this.sendRequest("signTransaction",{message:c().encode(n.serializeMessage())}),t=c().decode(e.signature),i=new o.PublicKey(e.publicKey);return n.addSignature(i,t),n}))}signAllTransactions(n){return a(this,void 0,void 0,(function*(){const e=yield this.sendRequest("signAllTransactions",{messages:n.map((n=>c().encode(n.serializeMessage())))}),t=e.signatures.map((n=>c().decode(n))),i=new o.PublicKey(e.publicKey);return n=n.map(((n,e)=>(n.addSignature(i,t[e]),n)))}))}diffieHellman(n){return a(this,void 0,void 0,(function*(){if(!(n instanceof Uint8Array))throw new Error("Data must be an instance of Uint8Array");return yield this.sendRequest("diffieHellman",{publicKey:n})}))}}},11731:function(n,e,t){t.r(e),t.d(e,{default:function(){return p}});var i=t(4399),r=t.n(i),o=t(73886),s=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},n(e,t)};return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),c=function(n,e,t,i){return new(t||(t=Promise))((function(r,o){function s(n){try{a(i.next(n))}catch(e){o(e)}}function c(n){try{a(i.throw(n))}catch(e){o(e)}}function a(n){var e;n.done?r(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(s,c)}a((i=i.apply(n,e||[])).next())}))},a=function(n,e){var t,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(n,s)}catch(c){o=[6,c],i=0}finally{t=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},u=function(n){function e(e,t){var i=n.call(this)||this;return i._instance=null,i._handleConnect=function(){i.emit("connect")},i._handleDisconnect=function(){window.clearInterval(i._pollTimer),i.emit("disconnect")},i._provider=e,i._network=t,i}return s(e,n),Object.defineProperty(e.prototype,"publicKey",{get:function(){return this._instance.publicKey||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connected",{get:function(){return this._instance.connected||!1},enumerable:!1,configurable:!0}),e.prototype.connect=function(){return c(this,void 0,void 0,(function(){var n=this;return a(this,(function(e){switch(e.label){case 0:return this._instance=new o.default(this._provider,this._network),this._instance.on("connect",this._handleConnect),this._instance.on("disconnect",this._handleDisconnect),this._pollTimer=window.setInterval((function(){var e,t;!1!==(null===(t=null===(e=n._instance)||void 0===e?void 0:e._popup)||void 0===t?void 0:t.closed)&&n._handleDisconnect()}),200),[4,this._instance.connect()];case 1:return e.sent(),[2]}}))}))},e.prototype.disconnect=function(){return c(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return this._instance.removeAllListeners("connect"),this._instance.removeAllListeners("disconnect"),[4,this._instance.disconnect()];case 1:return n.sent(),[2]}}))}))},e.prototype.signTransaction=function(n){return c(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return[4,this._instance.signTransaction(n)];case 1:return[2,e.sent()]}}))}))},e.prototype.signAllTransactions=function(n){return c(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return[4,this._instance.signAllTransactions(n)];case 1:return[2,e.sent()]}}))}))},e.prototype.signMessage=function(n,e){return void 0===e&&(e="hex"),c(this,void 0,void 0,(function(){var t;return a(this,(function(i){switch(i.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return[4,this._instance.sign(n,e)];case 1:return t=i.sent().signature,[2,Uint8Array.from(t)]}}))}))},e}(r()),l=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},n(e,t)};return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),d=function(n,e,t,i){return new(t||(t=Promise))((function(r,o){function s(n){try{a(i.next(n))}catch(e){o(e)}}function c(n){try{a(i.throw(n))}catch(e){o(e)}}function a(n){var e;n.done?r(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(s,c)}a((i=i.apply(n,e||[])).next())}))},h=function(n,e){var t,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(n,s)}catch(c){o=[6,c],i=0}finally{t=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},p=function(n){function e(e){var t=n.call(this)||this;return t._network="mainnet-beta",t._provider="https://www.salmonwallet.io",t._adapterInstance=null,t._connectHandler=null,t._connected=function(){t._connectHandler&&(t._connectHandler.resolve(),t._connectHandler=null),t.emit("connect",t.publicKey)},t._disconnected=function(){t._connectHandler&&(t._connectHandler.reject(),t._connectHandler=null),t._adapterInstance=null,t.emit("disconnect")},(null===e||void 0===e?void 0:e.network)&&(t._network=null===e||void 0===e?void 0:e.network),(null===e||void 0===e?void 0:e.provider)&&(t._provider=null===e||void 0===e?void 0:e.provider),t}return l(e,n),Object.defineProperty(e.prototype,"publicKey",{get:function(){var n;return(null===(n=this._adapterInstance)||void 0===n?void 0:n.publicKey)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnected",{get:function(){var n;return!!(null===(n=this._adapterInstance)||void 0===n?void 0:n.connected)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connected",{get:function(){return this.isConnected},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoApprove",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.connect=function(){return d(this,void 0,void 0,(function(){var n=this;return h(this,(function(e){switch(e.label){case 0:return this.connected?[2]:(this._adapterInstance=new u(this._provider,this._network),this._adapterInstance.on("connect",this._connected),this._adapterInstance.on("disconnect",this._disconnected),this._adapterInstance.connect(),[4,new Promise((function(e,t){n._connectHandler={resolve:e,reject:t}}))]);case 1:return e.sent(),[2]}}))}))},e.prototype.disconnect=function(){return d(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return this._adapterInstance?[4,this._adapterInstance.disconnect()]:[2];case 1:return n.sent(),[2]}}))}))},e.prototype.signTransaction=function(n){return d(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return[4,this._adapterInstance.signTransaction(n)];case 1:return[2,e.sent()]}}))}))},e.prototype.signAllTransactions=function(n){return d(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return[4,this._adapterInstance.signAllTransactions(n)];case 1:return[2,e.sent()]}}))}))},e.prototype.signMessage=function(n,e){return void 0===e&&(e="utf8"),d(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:if(!this.connected)throw new Error("Wallet not connected");return[4,this._adapterInstance.signMessage(n,e)];case 1:return[2,t.sent()]}}))}))},e.prototype.sign=function(n,e){return void 0===e&&(e="utf8"),d(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.signMessage(n,e)];case 1:return[2,t.sent()]}}))}))},e}(r())}}]);